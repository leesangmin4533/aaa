{
  "module": "sales_analysis",
  "task": "loop_mid_categories",
  "loop": {
    "index_var": "i",
    "start": 0,
    "until_missing_xpath": "//*[@id='mainframe.HFrameSet00.VFrameSet00.FrameSet.STMB011_M0.form.div_workForm.form.div2.form.gdList.body.gridrow_${i}.cell_0_0']",
    "steps": [
      {
        "action": "click",
        "target_xpath": "//*[@id='mainframe.HFrameSet00.VFrameSet00.FrameSet.STMB011_M0.form.div_workForm.form.div2.form.gdList.body.gridrow_${i}.cell_0_0']",
        "method": "javascript"
      },
      {
        "action": "wait",
        "target_xpath": "//*[@id='mainframe.HFrameSet00.VFrameSet00.FrameSet.STMB011_M0.form.div_workForm.form.div2.form.gdListSub.body.gridrow_0.cell_0_0']",
        "condition": "presence",
        "timeout": 10
      },
      {
        "action": "extract_network_response",
        "match": "selDetailSearch",
        "save_to": "output/category_${i}_detail.txt"
      },
      {
        "action": "parse_ssv",
        "input": "output/category_${i}_detail.txt",
        "filter": {
          "STOCK_QTY": "0"
        },
        "fields": ["ITEM_CD", "ITEM_NM", "STOCK_QTY"],
        "save_to": "output/category_${i}_filtered.txt"
      }
    ]
  }
}
